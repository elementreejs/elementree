!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.elementree=t():e.elementree=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){const r=n(6),o=n(7),i=["canEnter","canLeave","initial","onEnter","onLeave","value"];class s{constructor(e,t=!1){o(this),this.__emitter=new r,this.__states=e,this.__history=[],this.persistent=t;const n=e.initial;n&&this.__transition(n,void 0,!1)}get actions(){let e=this.state&&Object.keys(this.__states[this.state]).filter(e=>!i.includes(e));return e&&0!==e.length||(e=Object.keys(this.__states).filter(e=>!i.includes(e))),e.reduce((e,t)=>Object.assign(e,{[t]:t}),{})}set initial(e){this.__transition(e)}get value(){return this.__states[this.state].value}set value(e){const t=this.__states[this.state].value;e&&Object.getPrototypeOf(e)===Object.prototype?Object.assign(t,e):this.__states[this.state].value=e}onTransition(e){return this.__emitter.on("transition",e)}redo(){return this.persistent?this.__current===this.__history.length-1?this:(this.__current=this.__current+1,void this.__changeHistory()):this}reset(){return this.__transition(this.__states.initial,void 0,!1),this}to(e,t){const n=this.__states[this.state],r=n&&n[e]?n[e]:e;if(!r)throw new Error(`'${e}' does not exist as an action of '${this.state}'`);if(!this.__states[r])throw new Error(`'${r}' does not exist`);return this.__transition(r,t),this}undo(){if(!this.persistent||0===this.__current)return this;this.__current=this.__current-1,this.__changeHistory()}__recordHistory(){this.__history.push({state:this.state,value:this.value}),this.__current=this.__history.length-1}__changeHistory(){const{state:e,value:t}=this.__history[this.__current];this.__transition(e,t,!0,!1)}__transition(e,t,n=!0,r=!0){const o=this.state&&this.__states[this.state].canLeave;if(n&&o&&!o(this))return this;const i=this.state&&this.__states[e].canEnter;if(n&&i&&!i(this))return this;if(this.state){const e=this.__states[this.state].onLeave;e&&e(this)}this.state=e,t&&(this.value=t),this.persistent&&r&&this.__recordHistory(),this.__emitter.emit("transition",this);const s=this.__states[e].onEnter;s&&s(this)}}(e.exports=((e,t)=>new s(e,t))).Stated=s},function(e,t,n){const r=n(2),{Stated:o}=n(0),i=n(8),{register:s,route:a,view:l}=n(9);let u,c,f=!1;e.exports={attach:function(e,t,n={}){let o;"function"==typeof t?c=t:((o=s(t,n)).onTransition(e=>{c=l(e),r(u,c(e.value))}),c=(e=>l(o)(e))),i(()=>{u="string"==typeof e?document.querySelector(e):e;const t=o?c(o.value):c();r(u,t)})},html:n(10),prepare:function(e,t){let n,i=e.name;if(t){if(!t.initial)throw new Error(`The model for "${i}" must define an "initial" state.`);n=t instanceof o?t:new o(t)}return n&&n.onTransition(()=>{f||(f=!0,f=!r(u,c()))}),function(){return n?e(n,...arguments):e(...arguments)}},ready:i,render:n(11),route:a,state:o}},function(e,t,n){var r=n(3),o=n(4),i=3;function s(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName?e:(o(e,t),function(e,t){for(var n,r,o,i,l=0,u=0;n=t.childNodes[u],r=e.childNodes[u-l],n||r;u++)if(r)if(n)if(a(r,n))(o=s(r,n))!==n&&(t.replaceChild(o,n),l++);else{i=null;for(var c=u;c<t.childNodes.length;c++)if(a(t.childNodes[c],r)){i=t.childNodes[c];break}i?((o=s(r,i))!==i&&l++,t.insertBefore(o,n)):r.id||n.id?(t.insertBefore(r,n),l++):(o=s(r,n))!==n&&(t.replaceChild(o,n),l++)}else t.appendChild(r),l++;else t.removeChild(n),u--}(e,t),t):null:e}function a(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&(e.type===i&&e.nodeValue===t.nodeValue)}e.exports=function(e,t){return r.equal(typeof e,"object","nanomorph: oldTree should be an object"),r.equal(typeof t,"object","nanomorph: newTree should be an object"),s(t,e)}},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},function(e,t,n){var r=n(5),o=r.length,i=1,s=3,a=8;function l(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}e.exports=function(e,t){var n=e.nodeType,u=e.nodeName;n===i&&function(e,t){for(var n=t.attributes,r=e.attributes,o=null,i=null,s=null,a=null,l=r.length-1;l>=0;--l)a=r[l],s=a.name,o=a.namespaceURI,i=a.value,o?(s=a.localName||s,t.getAttributeNS(o,s)!==i&&t.setAttributeNS(o,s,i)):t.hasAttribute(s)?t.getAttribute(s)!==i&&("null"===i||"undefined"===i?t.removeAttribute(s):t.setAttribute(s,i)):t.setAttribute(s,i);for(var u=n.length-1;u>=0;--u)!1!==(a=n[u]).specified&&(s=a.name,(o=a.namespaceURI)?(s=a.localName||s,e.hasAttributeNS(o,s)||t.removeAttributeNS(o,s)):e.hasAttributeNS(null,s)||t.removeAttribute(s))}(e,t);n!==s&&n!==a||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue);"INPUT"===u?function(e,t){var n=e.value,r=t.value;l(e,t,"checked"),l(e,t,"disabled"),n!==r&&(t.setAttribute("value",n),t.value=n);"null"===n&&(t.value="",t.removeAttribute("value"));e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===u?function(e,t){l(e,t,"selected")}(e,t):"TEXTAREA"===u&&function(e,t){var n=e.value;n!==t.value&&(t.value=n);if(t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t);!function(e,t){for(var n=0;n<o;n++){var i=r[n];e[i]?t[i]=e[i]:t[i]&&(t[i]=void 0)}}(e,t)}},function(e,t){e.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"]},function(e,t,n){(e.exports=function(){this.events={}}).prototype={emit:function(e){var t=[].slice.call(arguments,1);[].slice.call(this.events[e]||[]).filter(function(e){e.apply(this,t)})},on:function(e,t){return(this.events[e]=this.events[e]||[]).push(t),function(){this.events[e]=this.events[e].filter(function(e){return e!==t})}.bind(this)}}},function(e,t){e.exports=(e=>{const t=e.constructor.prototype;for(let n of Reflect.ownKeys(t)){if("constructor"===n)continue;const r=Reflect.getOwnPropertyDescriptor(t,n);r&&"function"==typeof r.value&&(e[n]=e[n].bind(e))}return e})},function(e,t){e.exports=function(e){var t=document.readyState;"complete"!==t&&"interactive"!==t||setTimeout(e,0),document.addEventListener("DOMContentLoaded",e)}},function(e,t,n){const{Stated:r}=n(0);let o;e.exports={register:function(e,t={}){return Object.keys(e).forEach(n=>{e[n]={view:e[n],value:t},e.initial=e.initial?e.initial:new RegExp(n).test(window.location.pathname)?n:void 0}),o=new r(e)},route:function(e,t){o.to(e,Object.assign(o.value,t))},view:function(e){return e.__states[e.state].view}}},function(e,t){e.exports=function(e){var t,n=document.createElement("div");return n.innerHTML=e,t=n.childNodes,Array.isArray(t)?t:[].slice.call(t)}},function(e,t,n){var r=n(12),o=n(14),i=n(15),s=n(16),a=n(17),l="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink",c="!--";function f(e,t,n){var r;-1!==i.indexOf(e)&&(t.namespace=l);var f=!1;t.namespace&&(f=t.namespace,delete t.namespace);var h=!1;if(t.is&&(h=t.is,delete t.is),f)r=h?document.createElementNS(f,e,{is:h}):document.createElementNS(f,e);else{if(e===c)return document.createComment(t.comment);r=h?document.createElement(e,{is:h}):document.createElement(e)}for(var p in t)if(t.hasOwnProperty(p)){var d=p.toLowerCase(),m=t[p];if("classname"===d&&(d="class",p="class"),"htmlFor"===p&&(p="for"),-1!==s.indexOf(d))if("true"===m)m=d;else if("false"===m)continue;"on"===d.slice(0,2)||-1!==a.indexOf(d)?r[p]=m:f?"xlink:href"===p?r.setAttributeNS(u,p,m):/^xmlns($|:)/i.test(p)||r.setAttributeNS(null,p,m):r.setAttribute(p,m)}return o(r,n),r}e.exports=r(f,{comments:!0,createFragment:function(e){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++)"string"==typeof e[n]&&(e[n]=document.createTextNode(e[n])),t.appendChild(e[n]);return t}}),e.exports.default=e.exports,e.exports.createElement=f},function(e,t,n){var r=n(13),o=1,i=2,s=3,a=4,l=5,u=6,c=7,f=8,h=9,p=10,d=11,m=12,g=13;function v(e){return e===h||e===p}e.exports=function(e,t){t||(t={});var n=t.concat||function(e,t){return String(e)+String(t)};return!1!==t.attrToProp&&(e=r(e)),function(r){for(var _=o,x="",w=arguments.length,A=[],N=0;N<r.length;N++)if(N<w-1){var O=arguments[N+1],S=D(r[N]),k=_;k===p&&(k=f),k===h&&(k=f),k===c&&(k=f),k===a&&(k=l),k===i?"/"===x?(S.push([i,"/",O]),x=""):S.push([i,O]):S.push([0,k,O]),A.push.apply(A,S)}else A.push.apply(A,D(r[N]));var C,j=[null,{},[]],E=[[j,-1]];for(N=0;N<A.length;N++){var T=E[E.length-1][0],L=(S=A[N])[0];if(L===i&&/^\//.test(S[1])){var M=E[E.length-1][1];E.length>1&&(E.pop(),E[E.length-1][0][2][M]=e(T[0],T[1],T[2].length?T[2]:void 0))}else if(L===i){var V=[S[1],{},[]];T[2].push(V),E.push([V,T[2].length-1])}else if(L===l||0===L&&S[1]===l){for(var F,P="";N<A.length;N++)if(A[N][0]===l)P=n(P,A[N][1]);else{if(0!==A[N][0]||A[N][1]!==l)break;if("object"!=typeof A[N][2]||P)P=n(P,A[N][2]);else for(F in A[N][2])A[N][2].hasOwnProperty(F)&&!T[1][F]&&(T[1][F]=A[N][2][F])}A[N][0]===d&&N++;for(var R=N;N<A.length;N++)if(A[N][0]===f||A[N][0]===l)T[1][P]?""===A[N][1]||(T[1][P]=n(T[1][P],A[N][1])):T[1][P]=b(A[N][1]);else{if(0!==A[N][0]||A[N][1]!==f&&A[N][1]!==l){!P.length||T[1][P]||N!==R||A[N][0]!==s&&A[N][0]!==m||(T[1][P]=P.toLowerCase()),A[N][0]===s&&N--;break}T[1][P]?""===A[N][2]||(T[1][P]=n(T[1][P],A[N][2])):T[1][P]=b(A[N][2])}}else if(L===l)T[1][S[1]]=!0;else if(0===L&&S[1]===l)T[1][S[2]]=!0;else if(L===s){if(C=T[0],y.test(C)&&E.length){M=E[E.length-1][1];E.pop(),E[E.length-1][0][2][M]=e(T[0],T[1],T[2].length?T[2]:void 0)}}else if(0===L&&S[1]===o)void 0===S[2]||null===S[2]?S[2]="":S[2]||(S[2]=n("",S[2])),Array.isArray(S[2][0])?T[2].push.apply(T[2],S[2]):T[2].push(S[2]);else if(L===o)T[2].push(S[1]);else if(L!==d&&L!==m)throw new Error("unhandled: "+L)}if(j[2].length>1&&/^\s*$/.test(j[2][0])&&j[2].shift(),j[2].length>2||2===j[2].length&&/\S/.test(j[2][1])){if(t.createFragment)return t.createFragment(j[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(j[2][0])&&"string"==typeof j[2][0][0]&&Array.isArray(j[2][0][2])&&(j[2][0]=e(j[2][0][0],j[2][0][1],j[2][0][2])),j[2][0];function D(e){var n=[];_===c&&(_=a);for(var r=0;r<e.length;r++){var y=e.charAt(r);_===o&&"<"===y?(x.length&&n.push([o,x]),x="",_=i):">"!==y||v(_)||_===g?_===g&&/-$/.test(x)&&"-"===y?(t.comments&&n.push([f,x.substr(0,x.length-1)],[s]),x="",_=o):_===i&&/^!--$/.test(x)?(t.comments&&n.push([i,x],[l,"comment"],[d]),x=y,_=g):_===o||_===g?x+=y:_===i&&"/"===y&&x.length||(_===i&&/\s/.test(y)?(x.length&&n.push([i,x]),x="",_=a):_===i?x+=y:_===a&&/[^\s"'=\/]/.test(y)?(_=l,x=y):_===a&&/\s/.test(y)?(x.length&&n.push([l,x]),n.push([m])):_===l&&/\s/.test(y)?(n.push([l,x]),x="",_=u):_===l&&"="===y?(n.push([l,x],[d]),x="",_=c):_===l?x+=y:_!==u&&_!==a||"="!==y?_!==u&&_!==a||/\s/.test(y)?_===c&&'"'===y?_=p:_===c&&"'"===y?_=h:_===p&&'"'===y?(n.push([f,x],[m]),x="",_=a):_===h&&"'"===y?(n.push([f,x],[m]),x="",_=a):_!==c||/\s/.test(y)?_===f&&/\s/.test(y)?(n.push([f,x],[m]),x="",_=a):_!==f&&_!==h&&_!==p||(x+=y):(_=f,r--):(n.push([m]),/[\w-]/.test(y)?(x+=y,_=l):_=a):(n.push([d]),_=c)):(_===i&&x.length?n.push([i,x]):_===l?n.push([l,x]):_===f&&x.length&&n.push([f,x]),n.push([s]),x="",_=o)}return _===o&&x.length?(n.push([o,x]),x=""):_===f&&x.length?(n.push([f,x]),x=""):_===p&&x.length?(n.push([f,x]),x=""):_===h&&x.length?(n.push([f,x]),x=""):_===l&&(n.push([l,x]),x=""),n}};function b(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:n("",e)}};var y=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$")},function(e,t){e.exports=function(e){return function(t,r,o){for(var i in r)i in n&&(r[n[i]]=r[i],delete r[i]);return e(t,r,o)}};var n={class:"className",for:"htmlFor","http-equiv":"httpEquiv"}},function(e,t){var n=/\n[\s]+$/,r=/^\n[\s]+/,o=/[\s]+$/,i=/^[\s]+/,s=/[\n\s]+/g,a=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],l=["code","pre","textarea"];e.exports=function e(t,u){if(Array.isArray(u))for(var c,f,h=t.nodeName.toLowerCase(),p=!1,d=0,m=u.length;d<m;d++){var g=u[d];if(Array.isArray(g))e(t,g);else{("number"==typeof g||"boolean"==typeof g||"function"==typeof g||g instanceof Date||g instanceof RegExp)&&(g=g.toString());var v=t.childNodes[t.childNodes.length-1];if("string"==typeof g)p=!0,v&&"#text"===v.nodeName?v.nodeValue+=g:(g=document.createTextNode(g),t.appendChild(g),v=g),d===m-1&&(p=!1,-1===a.indexOf(h)&&-1===l.indexOf(h)?""===(c=v.nodeValue.replace(r,"").replace(o,"").replace(n,"").replace(s," "))?t.removeChild(v):v.nodeValue=c:-1===l.indexOf(h)&&(f=0===d?"":" ",c=v.nodeValue.replace(r,f).replace(i," ").replace(o,"").replace(n,"").replace(s," "),v.nodeValue=c));else if(g&&g.nodeType){p&&(p=!1,-1===a.indexOf(h)&&-1===l.indexOf(h)?""===(c=v.nodeValue.replace(r,"").replace(n,"").replace(s," "))?t.removeChild(v):v.nodeValue=c:-1===l.indexOf(h)&&(c=v.nodeValue.replace(i," ").replace(r,"").replace(n,"").replace(s," "),v.nodeValue=c));var y=g.nodeName;y&&(h=y.toLowerCase()),t.appendChild(g)}}}}},function(e,t){e.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]},function(e,t){e.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"]},function(e,t){e.exports=["indeterminate"]}])});